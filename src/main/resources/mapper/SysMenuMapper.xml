<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.gong.mapper.SysMenuMapper">
    <delete id="delete">
        DELETE FROM sys_menu WHERE id = #{id}
    </delete>
    <delete id="deleteByParent">
        DELETE FROM sys_menu WHERE parent_id = #{parentId}
    </delete>
    <select id="selectById" resultType="SysMenu">
        SELECT id, parent_id, menu_name, path, component, aside, menu_type, cache, status, icon, purview, remark, order_menu, create_by, update_by, create_time, update_time
            FROM sys_menu
                WHERE id = #{id} AND status = 1;
    </select>

    <select id="selectList" resultType="SysMenu">
        SELECT id, parent_id, menu_name, path, component, aside, menu_type, cache, status, icon, purview, remark, order_menu, create_by, update_by, create_time, update_time
            FROM sys_menu
    </select>

    <select id="limit" resultType="SysMenu">
        SELECT id, parent_id, menu_name, path, component, aside, menu_type, cache, status, icon, purview, remark, order_menu, create_by, update_by, create_time, update_time
            FROM sys_menu
                WHERE status = 1 LIMIT #{start}, #{total}
    </select>

    <!-- 通过菜单类型和菜单id -->
    <select id="selectByTypeAndId" resultType="SysMenu">
        SELECT id, parent_id, menu_name, path, component, aside, menu_type, cache, status, icon, purview, remark, order_menu, create_by, update_by, create_time, update_time
            FROM sys_menu
                <where>
                    <foreach item="item" index="index" collection="menuTypes"
                             open="menu_type in (" separator="," close=")" nullable="true">
                        #{item}
                    </foreach>
                    AND
                    <foreach item="item" index="index" collection="menuIds"
                             open="id in (" separator="," close=")" nullable="false">
                        #{item}
                    </foreach>
                    AND status = 1;
                </where>
    </select>

    <!--    通过菜单类型-->
    <select id="selectByType" resultType="SysMenu">
        SELECT id, parent_id, menu_name, path, component, aside, menu_type, cache, status, icon, purview, remark, order_menu, create_by, update_by, create_time, update_time
        FROM sys_menu
        <where>
            <foreach item="item" index="index" collection="menuTypes"
                     open="menu_type in (" separator="," close=")" nullable="true">
                #{item}
            </foreach>
            AND status = 1;
        </where>
    </select>

    <insert id="insert">
        INSERT INTO sys_menu (parent_id, menu_name, path, component, menu_type, cache, status, icon, purview, remark,order_menu, create_by, update_by)
        VALUES (#{parentId}, #{menuName}, #{path}, #{component}, #{menuType}, #{cache}, #{status}, #{icon}, #{purview}, #{remark}, #{orderMenu}, #{createBy}, #{updateBy})
    </insert>



</mapper>